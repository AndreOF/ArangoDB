<!DOCTYPE html>
<html lang="en-US" prefix="og: http://ogp.me/ns#">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />


<link rel="shortcut icon" type="image/x-icon" href="http://www.arangodb.org/wp-content/themes/triagens/images/favicon.ico">

<link rel="profile" href="http://gmpg.org/xfn/11" />
<link rel="stylesheet" type="text/css" media="all" href="http://www.arangodb.org/wp-content/themes/triagens-child/style.css" />
<link rel="pingback" href="" />


<!-- This site is optimized with the Yoast WordPress SEO plugin v1.4.4 - http://yoast.com/wordpress/seo/ -->
<title>ArangoDB Manual Pages - ArangoDB</title>
<meta name="description" content="ArangoDB Manual Pages"/>
<link rel="canonical" href="http://www.arangodb.org/manualredirector" />
<meta property='og:locale' content='en_US'/>
<meta property='og:title' content='ArangoDB Manual Pages - ArangoDB'/>
<meta property='og:description' content='ArangoDB Manual Pages'/>
<meta property='og:url' content='http://www.arangodb.org/manualredirector'/>
<meta property='og:site_name' content='ArangoDB'/>
<meta property='og:type' content='article'/>
<!-- / Yoast WordPress SEO plugin. -->

<link rel="alternate" type="application/rss+xml" title="ArangoDB &raquo; Feed" href="http://www.arangodb.org/feed" />
<link rel="alternate" type="application/rss+xml" title="ArangoDB &raquo; Comments Feed" href="http://www.arangodb.org/comments/feed" />
<link rel='stylesheet' id='wordpress-popular-posts-css'  href='http://www.arangodb.org/wp-content/plugins/wordpress-popular-posts/style/wpp.css?ver=3.5.1' type='text/css' media='all' />
<link rel='stylesheet' id='wp-syntax-css-css'  href='http://www.arangodb.org/wp-content/plugins/wp-syntax/css/wp-syntax.css?ver=1.0' type='text/css' media='all' />
<script type='text/javascript' src='http://www.arangodb.org/wp-includes/js/jquery/jquery.js?ver=1.8.3'></script>
<script type='text/javascript' src='http://www.arangodb.org/wp-includes/js/comment-reply.min.js?ver=3.5.1'></script>

    <style type="text/css">
    body {
    margin-top: -28px;
    padding-bottom: 28px;
    }
    body.admin-bar #wphead {
       padding-top: 0;
    }
    body.admin-bar #footer {
       padding-bottom: 28px;
    }
<link type="text/css" media="screen" rel="stylesheet" href="http://www.arangodb.org/wp-content/plugins/tweet-blender/css/tweets.css" />

    <style media="print" type="text/css">
      div.faq_answer {display: block!important;}
      p.faq_nav {display: none;}
    </style>


</head>

<body class="page page-id-1410 page-template page-template-onecolumn-page-php">

    <div id="access" role="navigation">
        <div id="nav">
            <a href="http://www.arangodb.org/" title="ArangoDB" id="branding"><img src="/wp-content/themes/triagens/images/logo_arangob_white.gif" width="154" height="34" alt="ArangoDB"></a>
            <div class="menu-header"><ul id="menu-home" class="menu"><li id="menu-item-184" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-184"><a href="http://www.arangodb.org/">Home</a></li>
<li id="menu-item-1345" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1345"><a href="http://www.arangodb.org/try">Try it out</a></li>
<li id="menu-item-279" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-279"><a href="http://www.arangodb.org/documentation">Documentation</a></li>
<li id="menu-item-95" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-95"><a href="http://www.arangodb.org/roadmap">Roadmap</a></li>
<li id="menu-item-71" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-71"><a href="http://www.arangodb.org/download">Downloads</a></li>
<li id="menu-item-1299" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1299"><a href="http://www.arangodb.org/api">Drivers</a></li>
<li id="menu-item-156" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-156"><a href="http://www.arangodb.org/blog">Blog</a></li>
</ul></div>            <div class="clear_both"></div>
        </div>
    </div><!-- #access -->

  <div id="surrounding">

    <div id="wrapper" class="hfeed">
	<div id="main">

    <div id="fullsize" class="one-column">
      <div id="content" role="main">



            <div id="post-1410" class="post-1410 page type-page status-publish hentry">
                    <h2 class="entry-title">ArangoDB Manual Pages</h2>

	  <div class="entry-content">

<link id="arangodb.css" type="text/css" href="arangodb.css" rel="stylesheet">
</div>
<div id="manual_search">
<form action="/" id="searchform" method="get" role="search">
  <div><label for="s" class="screen-reader-text">Search for:</label>
    <input type="text" id="s" name="s" value="" />
    <input type="submit" value="Search" id="searchsubmit" />
  </div>
</form>
</div>
<div class="clear_both"></div>
<hr />
<div class="arangodb">
<div>
<!-- Generated by Doxygen 1.8.2 -->
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">REST Interface for Documents </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"> <div class="navigate">prev | <a href="ImplementorManual.html">home</a> | <a href="RestEdge.html">next</a></div>  <div class="toc"><ul>
<li><a class="el" href="RestDocument.html">REST Interface for Documents</a><ul>
<li><a class="el" href="RestDocument.html#RestDocumentIntro">Documents, Identifiers, Handles </a></li>
<li><a class="el" href="RestDocument.html#RestDocumentResource">Address and ETag of a Document </a></li>
<li><a class="el" href="RestDocument.html#RestDocumentHttp">Working with Documents using REST </a><ul>
<li><a class="el" href="RestDocument.html#RestDocumentRead">GET /_api/document/document-handle</a></li>
<li><a class="el" href="RestDocument.html#RestDocumentCreate">POST /_api/document?collection=collection-name</a></li>
<li><a class="el" href="RestDocument.html#RestDocumentReplace">PUT /_api/document/document-handle</a></li>
<li><a class="el" href="RestDocument.html#RestDocumentUpdate">PATCH /_api/document/document-handle</a></li>
<li><a class="el" href="RestDocument.html#RestDocumentDelete">DELETE /_api/document/document-handle</a></li>
<li><a class="el" href="RestDocument.html#RestDocumentHead">HEAD /_api/document/document-handle</a></li>
<li><a class="el" href="RestDocument.html#RestDocumentReadAll">GET /_api/document?collection=collection-name</a> </li>
</ul>
</li>
</ul>
</li>
</ul>
  </div> <h2><a class="anchor" id="RestDocumentIntro"></a>
Documents, Identifiers, Handles </h2>
<p>This is an introduction to ArangoDB's REST interface for documents.</p>
<p> <span class="glossaryentry">Document</span>: Documents in ArangoDB are JSON objects. These objects can be nested (to any depth) and may contains lists. Each document is uniquely identified by its document handle. </p>
<p>For example:</p>
<pre class="fragment">{
  "_id" : "1234567/2345678",
  "_rev" : "3456789",
  "firstName" : "Hugo",
  "lastName" : "Schlonz",
  "address" : {
    "street" : "Strasse 1",
    "city" : "Hier"
  },
  "hobbies" : [
    "swimming",
    "biking",
    "programming"
  ]
}
</pre><p>All documents contain special attributes: the document handle in <code>_id</code>, the document's unique key in <code>_key</code> and and the etag aka document revision in <code>_rev</code>. The value of the <code>_key</code> attribute can be specified by the user when creating a document. <code>_id</code> and <code>_key</code> values are immutable once the document has been created. The <code>_rev</code> value is maintained by ArangoDB autonomously.</p>
<p> <span class="glossaryentry">Document Handle</span>: A document handle uniquely identifies a document in the database. It is a string and consists of a collection name and a document key separated by <code>/</code>. </p>
<p> <span class="glossaryentry">Document Key</span>: A document key uniquely identifies a document in a given collection. It can and should be used by clients when specific documents are searched. Document keys are stored in the <code>_key</code> attribute of documents. The key values are automatically indexed by ArangoDB so looking up a document by its key is regularly a fast operation. The <code>_key</code> value of a document is immutable once the document has been created.By default, ArangoDB will auto-generate a document key if no <code>_key</code> attribute is specified, and use the user-specified <code>_key</code> otherwise.This behavior can be changed on a per-collection level by creating collections with the <code>keyOptions</code> attribute.Using <code>keyOptions</code> it is possible to disallow user-specified keys completely, or to force a specific regime for auto-generating the <code>_key</code> values. </p>
<p> <span class="glossaryentry">Document Revision</span>: As ArangoDB supports MVCC, documents can exist in more than one revision. The document revision is the MVCC token used to identify a particular revision of a document. It is a string value currently containing an integer number and is unique within the list of document revisions for a single document. Document revisions can be used to conditionally update, replace or delete documents in the database. In order to find a particular revision of a document, you need the document handle and the document revision.ArangoDB currently uses 64bit unsigned integer values to maintain document revisions internally. When returning document revisions to clients, ArangoDB will put them into a string to ensure the revision id is not clipped by clients that do not support big integers. Clients should treat the revision id returned by ArangoDB as an opaque string when they store or use it locally. This will allow ArangoDB to change the format of revision ids later if this should be required. Clients can use revisions ids to perform simple equality/non-equality comparisons (e.g. to check whether a document has changed or not), but they should not use revision ids to perform greater/less than comparisions with them to check if a document revision is older than one another, even if this might work for some cases.Note: revision ids have been returned as integers up to including ArangoDB 1.1 </p>
<p> <span class="glossaryentry">Document Etag</span>: The document revision enclosed in double quotes. The revision is returned by several HTTP API methods in the <code>Etag</code> HTTP header. </p>
<p>The basic operations (create, read, update, delete) for documents are mapped to the standard HTTP methods (<code>POST</code>, <code>GET</code>, <code>PUT</code>, <code>DELETE</code>). There is also a partial update method, which is mapped to the HTTP <code>PATCH</code> method.</p>
<p>An identifier for the document revision is returned in the <code>ETag</code> header field. If you modify a document, you can use the <code>If-Match</code> field to detect conflicts. The revision of a document can be checking using the HTTP method <code>HEAD</code>.</p>
<h2><a class="anchor" id="RestDocumentResource"></a>
Address and ETag of a Document </h2>
<p>All documents in ArangoDB have a document handle. This handle uniquely defines a document and is managed by ArangoDB. All documents are found under the URI: </p>
<pre class="fragment">http://server:port/_api/document/document-handle
</pre><p>For example: Assume that the document handle, which is stored in the <code>_id</code> attribute of the document, is <code>demo/362549736</code>, then the URL of that document is: </p>
<pre class="fragment">http://localhost:8529/_api/document/demo/362549736
</pre><p>Each document also has a document revision or etag with is returned in the "ETag" header field when requesting a document.</p>
<p>If you obtain a document using <code>GET</code> and you want to check if a newer revision is available, then you can use the <code>If-None-Match</code> header. If the document is unchanged, a <code>HTTP 412</code> is returned.</p>
<p>If you want to update or delete a document, then you can use the <code>If-Match</code> header. If the document has changed, then the operation is aborted and a <code>HTTP 412</code> is returned.</p>
<h2><a class="anchor" id="RestDocumentHttp"></a>
Working with Documents using REST </h2>
<p><a class="anchor" id="RestDocumentRead"></a> </p><div class="restheader">GET /_api/document/<code>document-handle</code><div class="restheaderremark">(reads a document)</div></div> <H3>URL parameters</H3> <div class="resturlparam">document-handle (string,required)</div> The Handle of the Document. <H3>HTTP header parameters</H3> <div class="restheaderparam">If-None-Match (string,optional)</div> If the "If-None-Match" header is given, then it must contain exactly one etag. The document is returned, if it has a different revision than the given etag. Otherwise a <code>HTTP 304</code> is returned. <div class="restheaderparam">If-Match (string,optional)</div> If the "If-Match" header is given, then it must contain exactly one etag. The document is returned, if it has the same revision ad the given etag. Otherwise a <code>HTTP 412</code> is returned. As an alternative you can supply the etag in an attribute <code>rev</code> in the URL. <H3 class="space-before">Description</H3> Returns the document identified by <code>document-handle</code>. The returned document contains two special attributes: <code>_id</code> containing the document handle and <code>_rev</code> containing the revision. <H3>Return codes</H3> <p></p><div class="restreturncode">HTTP 200</div> is returned if the document was found <p></p><div class="restreturncode">HTTP 404</div> is returned if the document or collection was not found <p></p><div class="restreturncode">HTTP 304</div> is returned if the "If-None-Match" header is given and the document has same version <p></p><div class="restreturncode">HTTP 412</div> is returned if a "If-Match" header or <code>rev</code> is given and the found document has a different version <H3>Examples</H3>Use a document handle:<pre class="fragment">unix&gt; curl --dump - http://localhost:8529/_api/document/products/286745745

HTTP/1.1 200 OK
content-type: application/json; charset=utf-8
etag: "286745745"

{ 
  "hello" : "world", 
  "_id" : "products/286745745", 
  "_rev" : "286745745", 
  "_key" : "286745745" 
}

</pre><p> Use a document handle and an etag:<pre class="fragment">unix&gt; curl --header 'If-None-Match:"287859857"' --dump - http://localhost:8529/_api/document/products/287859857

HTTP/1.1 304 Not Modified
content-type: text/plain; charset=utf-8
etag: "287859857"

</pre><p> Unknown document handle:<pre class="fragment">unix&gt; curl --dump - http://localhost:8529/_api/document/products/unknownhandle

HTTP/1.1 404 Not Found
content-type: application/json; charset=utf-8

{ 
  "error" : true, 
  "errorMessage" : "document /_api/document/products/unknownhandle not found", 
  "code" : 404, 
  "errorNum" : 1202 
}

</pre> </p>
<p><a class="anchor" id="RestDocumentCreate"></a> </p><div class="restheader">POST /_api/document<div class="restheaderremark">(creates a document)</div></div> <H3>Body parameters</H3><div class="restbodyparam">document (json,required)</div> A JSON representation of document. <H3>Query parameters</H3> <div class="restqueryparam">collection (string,required)</div> The collection name. <div class="restqueryparam">createCollection (boolean,optional)</div> If this parameter has a value of <code>true</code> or <code>yes</code>, then the collection is created if it does not yet exist. Other values will be ignored so the collection must be present for the operation to succeed. <div class="restqueryparam">waitForSync (boolean,optional)</div> Wait until document has been sync to disk. <H3 class="space-before">Description</H3> Creates a new document in the collection named <code>collection</code>. A JSON representation of the document must be passed as the body of the POST request.If the document was created successfully, then the "Location" header contains the path to the newly created document. The "ETag" header field contains the revision of the document.The body of the response contains a JSON object with the following attributes:<ul>
<li><code>_id</code> contains the document handle of the newly created document</li>
<li><code>_key</code> contains the document key</li>
<li><code>_rev</code> contains the document revision</li>
</ul>
If the collection parameter <code>waitForSync</code> is <code>false</code>, then the call returns as soon as the document has been accepted. It will not wait, until the documents has been sync to disk.Optionally, the URL parameter <code>waitForSync</code> can be used to force synchronisation of the document creation operation to disk even in case that the <code>waitForSync</code> flag had been disabled for the entire collection. Thus, the <code>waitForSync</code> URL parameter can be used to force synchronisation of just this specific operations. To use this, set the <code>waitForSync</code> parameter to <code>true</code>. If the <code>waitForSync</code> parameter is not specified or set to <code>false</code>, then the collection's default <code>waitForSync</code> behavior is applied. The <code>waitForSync</code> URL parameter cannot be used to disable synchronisation for collections that have a default <code>waitForSync</code> value of <code>true</code>. <H3>Return codes</H3> <p></p><div class="restreturncode">HTTP 201</div> is returned if the document was created sucessfully and <code>waitForSync</code> was <code>true</code>. <p></p><div class="restreturncode">HTTP 202</div> is returned if the document was created sucessfully and <code>waitForSync</code> was <code>false</code>. <p></p><div class="restreturncode">HTTP 400</div> is returned if the body does not contain a valid JSON representation of a document. The response body contains an error document in this case. <p></p><div class="restreturncode">HTTP 404</div> is returned if the collection specified by <code>collection</code> is unknown. The response body contains an error document in this case. <H3>Examples</H3>Create a document given a collection named <code>products</code>. Note that the revision identifier might or might not by equal to the auto-generated key.<pre class="fragment">unix&gt; curl -X POST --data @- --dump - http://localhost:8529/_api/document?collection=products
{ "Hello": "World" }

HTTP/1.1 201 Created
content-type: application/json; charset=utf-8
etag: "282485905"
location: /_api/document/products/282485905

{ 
  "error" : false, 
  "_id" : "products/282485905", 
  "_rev" : "282485905", 
  "_key" : "282485905" 
}

</pre><p> Create a document in a collection named <code>products</code> with a collection-level <code>waitForSync</code> value of <code>false</code>.<pre class="fragment">unix&gt; curl -X POST --data @- --dump - http://localhost:8529/_api/document?collection=products
{ "Hello": "World" }

HTTP/1.1 202 Accepted
content-type: application/json; charset=utf-8
etag: "283534481"
location: /_api/document/products/283534481

{ 
  "error" : false, 
  "_id" : "products/283534481", 
  "_rev" : "283534481", 
  "_key" : "283534481" 
}

</pre><p> Create a document in a collection with a collection-level <code>waitForSync</code> value of <code>false</code>, but using the <code>waitForSync</code> URL parameter.<pre class="fragment">unix&gt; curl -X POST --data @- --dump - http://localhost:8529/_api/document?collection=products&amp;waitForSync=true
{ "Hello": "World" }

HTTP/1.1 201 Created
content-type: application/json; charset=utf-8
etag: "284583057"
location: /_api/document/products/284583057

{ 
  "error" : false, 
  "_id" : "products/284583057", 
  "_rev" : "284583057", 
  "_key" : "284583057" 
}

</pre><p> Create a document in a new, named collection<pre class="fragment">unix&gt; curl -X POST --data @- --dump - http://localhost:8529/_api/document?collection=products&amp;createCollection=true
{ "Hello": "World" }

HTTP/1.1 202 Accepted
content-type: application/json; charset=utf-8
etag: "285631633"
location: /_api/document/products/285631633

{ 
  "error" : false, 
  "_id" : "products/285631633", 
  "_rev" : "285631633", 
  "_key" : "285631633" 
}

</pre><p> Unknown collection name:<pre class="fragment">unix&gt; curl -X POST --data @- --dump - http://localhost:8529/_api/document?collection=products
{ "Hello": "World" }

HTTP/1.1 404 Not Found
content-type: application/json; charset=utf-8

{ 
  "error" : true, 
  "errorMessage" : "collection /_api/collection/products not found", 
  "code" : 404, 
  "errorNum" : 1203 
}

</pre><p> Illegal document:<pre class="fragment">unix&gt; curl -X POST --data @- --dump - http://localhost:8529/_api/document?collection=products
{ 1: "World" }

HTTP/1.1 400 Bad Request
content-type: application/json; charset=utf-8

{ 
  "error" : true, 
  "errorMessage" : "expecting attribute name", 
  "code" : 400, 
  "errorNum" : 600 
}

</pre> </p>
<p><a class="anchor" id="RestDocumentReplace"></a> </p><div class="restheader">PUT /_api/document/<code>document-handle</code><div class="restheaderremark">(replaces a document)</div></div> <H3>URL parameters</H3> <div class="resturlparam">document-handle (string,required)</div> The Handle of the Document. <H3>Query parameters</H3> <div class="restqueryparam">waitForSync (boolean,optional)</div> Wait until document has been sync to disk. <div class="restqueryparam">rev (string,optional)</div> You can conditionally replace a document based on a target revision id by using the <code>rev</code> URL parameter. <div class="restqueryparam">policy (string,optional)</div> To control the update behavior in case there is a revision mismatch, you can use the <code>policy</code> parameter. This is the same as when replacing documents (see replacing documents for more details). <H3>HTTP header parameters</H3> <div class="restheaderparam">If-Match (string,optional)</div> You can conditionally replace a document based on a target revision id by using the <code>if-match</code> HTTP header. <H3 class="space-before">Description</H3> Completely updates (i.e. replaces) the document identified by <code>document-handle</code>. If the document exists and can be updated, then a <code>HTTP 201</code> is returned and the "ETag" header field contains the new revision of the document.If the new document passed in the body of the request contains the <code>document-handle</code> in the attribute <code>_id</code> and the revision in <code>_rev</code>, these attributes will be ignored. Only the URI and the "ETag" header are relevant in order to avoid confusion when using proxies.Optionally, the URL parameter <code>waitForSync</code> can be used to force synchronisation of the document replacement operation to disk even in case that the <code>waitForSync</code> flag had been disabled for the entire collection. Thus, the <code>waitForSync</code> URL parameter can be used to force synchronisation of just specific operations. To use this, set the <code>waitForSync</code> parameter to <code>true</code>. If the <code>waitForSync</code> parameter is not specified or set to <code>false</code>, then the collection's default <code>waitForSync</code> behavior is applied. The <code>waitForSync</code> URL parameter cannot be used to disable synchronisation for collections that have a default <code>waitForSync</code> value of <code>true</code>.The body of the response contains a JSON object with the information about the handle and the revision. The attribute <code>_id</code> contains the known <code>document-handle</code> of the updated document, the attribute <code>_rev</code> contains the new document revision.If the document does not exist, then a <code>HTTP 404</code> is returned and the body of the response contains an error document.There are two ways for specifying the targeted document revision id for conditional replacements (i.e. replacements that will only be executed if the revision id found in the database matches the document revision id specified in the request):</p>
<ul>
<li>specifying the target revision in the <code>rev</code> URL query parameter</li>
<li>specifying the target revision in the <code>if-match</code> HTTP header</li>
</ul>
Specifying a target revision is optional, however, if done, only one of the described mechanisms must be used (either the <code>rev</code> URL parameter or the <code>if-match</code> HTTP header). Regardless which mechanism is used, the parameter needs to contain the target document revision id as returned in the <code>_rev</code> attribute of a document or by an HTTP <code>etag</code> header.For example, to conditionally replace a document based on a specific revision id, you the following request:<ul>
<li>PUT /_api/document/<code>document-handle</code>?rev=<code>etag</code></li>
</ul>
If a target revision id is provided in the request (e.g. via the <code>etag</code> value in the <code>rev</code> URL query parameter above), ArangoDB will check that the revision id of the document found in the database is equal to the target revision id provided in the request. If there is a mismatch between the revision id, then by default a <code>HTTP 412</code> conflict is returned and no replacement is performed.The conditional update behavior can be overriden with the <code>policy</code> URL query parameter:<ul>
<li>PUT /_api/document/<code>document-handle</code>?policy=<code>policy</code></li>
</ul>
If <code>policy</code> is set to <code>error</code>, then the behavior is as before: replacements will fail if the revision id found in the database does not match the target revision id specified in the request.If <code>policy</code> is set to <code>last</code>, then the replacement will succeed, even if the revision id found in the database does not match the target revision id specified in the request. You can use the <code>last</code> <code>policy</code> to force replacements. <H3>Return codes</H3> <p></p><div class="restreturncode">HTTP 201</div> is returned if the document was created sucessfully and <code>waitForSync</code> was <code>true</code>. <p></p><div class="restreturncode">HTTP 202</div> is returned if the document was created sucessfully and <code>waitForSync</code> was <code>false</code>. <p></p><div class="restreturncode">HTTP 400</div> is returned if the body does not contain a valid JSON representation of a document. The response body contains an error document in this case. <p></p><div class="restreturncode">HTTP 404</div> is returned if collection or the document was not found <p></p><div class="restreturncode">HTTP 412</div> is returned if a "If-Match" header or <code>rev</code> is given and the found document has a different version <H3>Examples</H3>Using document handle:<pre class="fragment">unix&gt; curl -X PUT --data @- --dump - http://localhost:8529/_api/document/products/291923089
{"Hello": "you"}

HTTP/1.1 202 Accepted
content-type: application/json; charset=utf-8
etag: "292250769"
location: /_api/document/products/291923089

{ 
  "error" : false, 
  "_id" : "products/291923089", 
  "_rev" : "292250769", 
  "_key" : "291923089" 
}

</pre><p> Unknown document handle:<pre class="fragment">unix&gt; curl -X PUT --data @- --dump - http://localhost:8529/_api/document/products/293233809
{}

HTTP/1.1 404 Not Found
content-type: application/json; charset=utf-8

{ 
  "error" : true, 
  "errorMessage" : "document /_api/document/products/293233809 not found", 
  "code" : 404, 
  "errorNum" : 1202 
}

</pre><p> Produce a revision conflict:<pre class="fragment">unix&gt; curl -X PUT --header 'If-Match:"295003281"' --data @- --dump - http://localhost:8529/_api/document/products/294675601
{"other":"content"}

HTTP/1.1 412 Precondition Failed
content-type: application/json; charset=utf-8

{ 
  "error" : true, 
  "code" : 412, 
  "errorNum" : 1200, 
  "errorMessage" : "precondition failed", 
  "_id" : "products/294675601", 
  "_rev" : "294675601", 
  "_key" : "294675601" 
}

</pre><p> Last write wins:<pre class="fragment">unix&gt; curl -X PUT --header 'If-Match:"296576145"' --data @- --dump - http://localhost:8529/_api/document/products/296182929?policy=last
{}

HTTP/1.1 202 Accepted
content-type: application/json; charset=utf-8
etag: "296838289"
location: /_api/document/products/296182929

{ 
  "error" : false, 
  "_id" : "products/296182929", 
  "_rev" : "296838289", 
  "_key" : "296182929" 
}

</pre><p> Alternative to header field:<pre class="fragment">unix&gt; curl -X PUT --data @- --dump - http://localhost:8529/_api/document/products/297886865?rev=298214545
{"other":"content"}

HTTP/1.1 412 Precondition Failed
content-type: application/json; charset=utf-8

{ 
  "error" : true, 
  "code" : 412, 
  "errorNum" : 1200, 
  "errorMessage" : "precondition failed", 
  "_id" : "products/297886865", 
  "_rev" : "297886865", 
  "_key" : "297886865" 
}

</pre> </p>
<p><a class="anchor" id="RestDocumentUpdate"></a> </p><div class="restheader">PATCH /_api/document/<code>document-handle</code><div class="restheaderremark">(patches a document)</div></div> <H3>URL parameters</H3> <div class="resturlparam">document-handle (string,required)</div> The Handle of the Document. <H3>Query parameters</H3> <div class="restqueryparam">keepNull (string,optional)</div> If the intention is to delete existing attributes with the patch command, the URL query parameter <code>keepNull</code> can be used with a value of <code>false</code>. This will modify the behavior of the patch command to remove any attributes from the existing document that are contained in the patch document with an attribute value of <code>null</code>. <div class="restqueryparam">waitForSync (boolean,optional)</div> Wait until document has been sync to disk. <div class="restqueryparam">rev (string,optional)</div> You can conditionally patch a document based on a target revision id by using the <code>rev</code> URL parameter. <div class="restqueryparam">policy (string,optional)</div> To control the update behavior in case there is a revision mismatch, you can use the <code>policy</code> parameter. <H3>HTTP header parameters</H3> <div class="restheaderparam">If-Match (string,optional)</div> You can conditionally delete a document based on a target revision id by using the <code>if-match</code> HTTP header. <H3 class="space-before">Description</H3> Partially updates the document identified by <code>document-handle</code>. The body of the request must contain a JSON document with the attributes to patch (the patch document). All attributes from the patch document will be added to the existing document if they do not yet exist, and overwritten in the existing document if they do exist there.Setting an attribute value to <code>null</code> in the patch document will cause a value of <code>null</code> be saved for the attribute by default.Optionally, the URL parameter <code>waitForSync</code> can be used to force synchronisation of the document update operation to disk even in case that the <code>waitForSync</code> flag had been disabled for the entire collection. Thus, the <code>waitForSync</code> URL parameter can be used to force synchronisation of just specific operations. To use this, set the <code>waitForSync</code> parameter to <code>true</code>. If the <code>waitForSync</code> parameter is not specified or set to <code>false</code>, then the collection's default <code>waitForSync</code> behavior is applied. The <code>waitForSync</code> URL parameter cannot be used to disable synchronisation for collections that have a default <code>waitForSync</code> value of <code>true</code>.The body of the response contains a JSON object with the information about the handle and the revision. The attribute <code>_id</code> contains the known <code>document-handle</code> of the updated document, the attribute <code>_rev</code> contains the new document revision.If the document does not exist, then a <code>HTTP 404</code> is returned and the body of the response contains an error document.You can conditionally update a document based on a target revision id by using either the <code>rev</code> URL parameter or the <code>if-match</code> HTTP header. To control the update behavior in case there is a revision mismatch, you can use the <code>policy</code> parameter. This is the same as when replacing documents (see replacing documents for details). <H3>Return codes</H3> <p></p><div class="restreturncode">HTTP 201</div> is returned if the document was created sucessfully and <code>waitForSync</code> was <code>true</code>. <p></p><div class="restreturncode">HTTP 202</div> is returned if the document was created sucessfully and <code>waitForSync</code> was <code>false</code>. <p></p><div class="restreturncode">HTTP 400</div> is returned if the body does not contain a valid JSON representation of a document. The response body contains an error document in this case. <p></p><div class="restreturncode">HTTP 404</div> is returned if collection or the document was not found <p></p><div class="restreturncode">HTTP 412</div> is returned if a "If-Match" header or <code>rev</code> is given and the found document has a different version <H3>Examples</H3>patches an existing document with new content.<pre class="fragment">unix&gt; curl -X PATCH --data @- --dump - http://localhost:8529/_api/document/products/299394193
{"hello":"world"}

HTTP/1.1 202 Accepted
content-type: application/json; charset=utf-8
etag: "299787409"
location: /_api/document/products/299394193

{ 
  "error" : false, 
  "_id" : "products/299394193", 
  "_rev" : "299787409", 
  "_key" : "299394193" 
}

unix&gt; curl -X PATCH --data @- --dump - http://localhost:8529/_api/document/products/299394193
{"numbers":{"one":1,"two":2,"three":3,"empty":null}}

HTTP/1.1 202 Accepted
content-type: application/json; charset=utf-8
etag: "300377233"
location: /_api/document/products/299394193

{ 
  "error" : false, 
  "_id" : "products/299394193", 
  "_rev" : "300377233", 
  "_key" : "299394193" 
}

unix&gt; curl --dump - http://localhost:8529/_api/document/products/299394193

HTTP/1.1 200 OK
content-type: application/json; charset=utf-8
etag: "300377233"

{ 
  "one" : "world", 
  "hello" : "world", 
  "numbers" : { 
    "empty" : null, 
    "one" : 1, 
    "two" : 2, 
    "three" : 3 
  }, 
  "_id" : "products/299394193", 
  "_rev" : "300377233", 
  "_key" : "299394193" 
}

unix&gt; curl -X PATCH --data @- --dump - http://localhost:8529/_api/document/products/299394193?keepNull=false
{"hello":null,"numbers":{"four":4}}

HTTP/1.1 202 Accepted
content-type: application/json; charset=utf-8
etag: "300835985"
location: /_api/document/products/299394193

{ 
  "error" : false, 
  "_id" : "products/299394193", 
  "_rev" : "300835985", 
  "_key" : "299394193" 
}

unix&gt; curl --dump - http://localhost:8529/_api/document/products/299394193

HTTP/1.1 200 OK
content-type: application/json; charset=utf-8
etag: "300835985"

{ 
  "one" : "world", 
  "numbers" : { 
    "empty" : null, 
    "one" : 1, 
    "two" : 2, 
    "three" : 3, 
    "four" : 4 
  }, 
  "_id" : "products/299394193", 
  "_rev" : "300835985", 
  "_key" : "299394193" 
}

</pre> </p>
<p><a class="anchor" id="RestDocumentDelete"></a> </p><div class="restheader">DELETE /_api/document/<code>document-handle</code><div class="restheaderremark">(deletes a document)</div></div> <H3>URL parameters</H3> <div class="resturlparam">document-handle (string,required)</div> Deletes the document identified by <code>document-handle</code>. <H3>Query parameters</H3> <div class="restqueryparam">rev (string,optional)</div> You can conditionally delete a document based on a target revision id by using the <code>rev</code> URL parameter. <div class="restqueryparam">policy (string,optional)</div> To control the update behavior in case there is a revision mismatch, you can use the <code>policy</code> parameter. This is the same as when replacing documents (see replacing documents for more details). <div class="restqueryparam">waitForSync (boolean,optional)</div> Wait until document has been sync to disk. <H3>HTTP header parameters</H3> <div class="restheaderparam">If-Match (string,optional)</div> You can conditionally delete a document based on a target revision id by using the <code>if-match</code> HTTP header. <H3 class="space-before">Description</H3> The body of the response contains a JSON object with the information about the handle and the revision. The attribute <code>_id</code> contains the known <code>document-handle</code> of the updated document, the attribute <code>_rev</code> contains the known document revision.If the <code>waitForSync</code> parameter is not specified or set to <code>false</code>, then the collection's default <code>waitForSync</code> behavior is applied. The <code>waitForSync</code> URL parameter cannot be used to disable synchronisation for collections that have a default <code>waitForSync</code> value of <code>true</code>. <H3>Return codes</H3> <p></p><div class="restreturncode">HTTP 200</div> is returned if the document was deleted sucessfully and <code>waitForSync</code> was <code>true</code>. <p></p><div class="restreturncode">HTTP 202</div> is returned if the document was deleted sucessfully and <code>waitForSync</code> was <code>false</code>. <p></p><div class="restreturncode">HTTP 404</div> is returned if the collection or the document was not found. The response body contains an error document in this case. <p></p><div class="restreturncode">HTTP 412</div> is returned if a "If-Match" header or <code>rev</code> is given and the current document has a different version <H3>Examples</H3>Using document handle:<pre class="fragment">unix&gt; curl -X DELETE --dump - http://localhost:8529/_api/document/products/301950097

HTTP/1.1 200 OK
content-type: application/json; charset=utf-8

{ 
  "error" : false, 
  "_id" : "products/301950097", 
  "_rev" : "301950097", 
  "_key" : "301950097" 
}

</pre><p> Unknown document handle:<pre class="fragment">unix&gt; curl -X DELETE --dump - http://localhost:8529/_api/document/products/303195281

HTTP/1.1 404 Not Found
content-type: application/json; charset=utf-8

{ 
  "error" : true, 
  "errorMessage" : "document /_api/document/products/303195281 not found", 
  "code" : 404, 
  "errorNum" : 1202 
}

</pre><p> Revision conflict:<pre class="fragment">unix&gt; curl -X DELETE --header 'If-Match:"304899217"' --dump - http://localhost:8529/_api/document/products/304506001

HTTP/1.1 412 Precondition Failed
content-type: application/json; charset=utf-8

{ 
  "error" : true, 
  "code" : 412, 
  "errorNum" : 1200, 
  "errorMessage" : "precondition failed", 
  "_id" : "products/304506001", 
  "_rev" : "304506001", 
  "_key" : "304506001" 
}

</pre> </p>
<p><a class="anchor" id="RestDocumentHead"></a> </p><div class="restheader">HEAD /_api/document/<code>document-handle</code><div class="restheaderremark">(reads a document header)</div></div> <H3>URL parameters</H3> <div class="resturlparam">document-handle (string,required)</div> The Handle of the Document. <H3>Query parameters</H3> <div class="restqueryparam">rev (string,optional)</div> You can conditionally delete a document based on a target revision id by using the <code>rev</code> URL parameter. <div class="restqueryparam">policy (string,optional)</div> To control the update behavior in case there is a revision mismatch, you can use the <code>policy</code> parameter. This is the same as when replacing documents (see replacing documents for more details). <H3>HTTP header parameters</H3> <div class="restheaderparam">If-Match (string,optional)</div> You can conditionally get a document based on a target revision id by using the <code>if-match</code> HTTP header. <H3 class="space-before">Description</H3> Like <code>GET</code>, but only returns the header fields and not the body. You can use this call to get the current revision of a document or check if the document was deleted. <H3>Return codes</H3> <p></p><div class="restreturncode">HTTP 200</div> is returned if the document was found <p></p><div class="restreturncode">HTTP 404</div> is returned if the document or collection was not found <p></p><div class="restreturncode">HTTP 304</div> is returned if the "If-None-Match" header is given and the document has same version <p></p><div class="restreturncode">HTTP 412</div> is returned if a "If-Match" header or <code>rev</code> is given and the found document has a different version <H3>Examples</H3><pre class="fragment">unix&gt; curl -X HEAD --dump - http://localhost:8529/_api/document/products/290743441

HTTP/1.1 200 OK
content-type: application/json; charset=utf-8
etag: "290743441"

</pre> </p>
<p><a class="anchor" id="RestDocumentReadAll"></a>reads all documents from collection </p><div class="restheader">GET /_api/document<div class="restheaderremark">(reads all documents from collection)</div></div> <H3>Query parameters</H3> <div class="restqueryparam">collection (string,required)</div> The Id of the collection. <H3 class="space-before">Description</H3> Returns a list of all URI for all documents from the collection identified by <code>collection</code>. <H3>Return codes</H3> <p></p><div class="restreturncode">HTTP 200</div> All went good. <p></p><div class="restreturncode">HTTP 404</div> The collection does not exist. <H3>Examples</H3>Returns a collection.<pre class="fragment">unix&gt; curl --dump - http://localhost:8529/_api/document/?collection=products

HTTP/1.1 200 OK
content-type: application/json; charset=utf-8

{ 
  "documents" : [ 
    "/_api/document/products/289694865", 
    "/_api/document/products/289367185", 
    "/_api/document/products/288973969" 
  ] 
}

</pre><p> Collection does not exist.<pre class="fragment">unix&gt; curl --dump - http://localhost:8529/_api/document/?collection=doesnotexist

HTTP/1.1 404 Not Found
content-type: application/json; charset=utf-8

{ 
  "error" : true, 
  "errorMessage" : "collection /_api/collection/doesnotexist not found", 
  "code" : 404, 
  "errorNum" : 1203 
}

</pre>  </p>
</div></div><!-- contents -->
</div>


	  </div><!-- .entry-content -->
	</div><!-- #post-## -->


      <div id="comments">


  <p class="nocomments">Comments are closed.</p>



</div><!-- #comments -->


      </div><!-- #content -->
    </div><!-- #container -->

  <div style="clear:both;"></div>
  </div><!-- #main -->



</div><!-- #wrapper -->
</div><!-- #surrounding -->


  <div id="footer" role="contentinfo">
    <div id="colophon">




      <div id="footer-widget-area" role="complementary">

	<div id="first" class="widget-area">
	  <ul class="xoxo">
		<li id="recent-posts-4" class="widget-container widget_recent_entries">	  <h3 class="widget-title">Recent Posts</h3>	<ul>
	  <li>
	<a href="http://www.arangodb.org/2013/05/22/replication-and-sharding-in-arangodb" title="Our plans on replication and sharding in ArangoDB">Our plans on replication and sharding in ArangoDB</a>
	    </li>
	  <li>
	<a href="http://www.arangodb.org/2013/05/14/ideas-and-facts-from-scotland-js-in-edinburgh" title="Ideas and Facts from scotland.js in Edinburgh">Ideas and Facts from scotland.js in Edinburgh</a>
	    </li>
	  <li>
	<a href="http://www.arangodb.org/2013/05/12/arangodb-1-3-0-released" title="ArangoDB 1.3.0 released">ArangoDB 1.3.0 released</a>
	    </li>
	  <li>
	<a href="http://www.arangodb.org/2013/05/06/foxx-screencast-part-2" title="Foxx Screencast: Part 2">Foxx Screencast: Part 2</a>
	    </li>
	</ul>
    </li><li id="text-5" class="widget-container widget_text"><h3 class="widget-title">Documentation</h3>     <div class="textwidget"><ul>
  <li><a href="/quickstart">First step tutorial</a></li>
  <li><a href="/manuals">Manual/documentation (HTML/PDF)</a></li>
  <li><a href="/manuals/arangodb_1.0_shell_reference_card.pdf">ArangoDB Shell Reference Card (HTML/PDF)</a></li>
  <li><a href="/try">Try ArangoDB online</a></li>
  <li><a href="/api">API clients & 3rd party libs</a></li>
        <li><a href="/logos">ArangoDB artwork/logos</a></li>
</ul>
</div>
    </li><li id="text-7" class="widget-container widget_text"><h3 class="widget-title">Social Links</h3>      <div class="textwidget"><ul>
  <li><a href="https://twitter.com/arangodb">ArangoDB on Twitter</a></li>
  <li><a href="https://groups.google.com/group/arangodb">ArangoDB Google Group</a></li>
  <li><a href="http://stackoverflow.com/questions/tagged/arangodb">ArangoDB questions on StackOverflow</a></li>
  <li><a href="https://github.com/triagens/arangodb/issues?state=open">Issue Tracker at Github</a></li>
</ul></div>
    </li><li id="text-6" class="widget-container widget_text"><h3 class="widget-title">Roadmap</h3>	<div class="textwidget"><ul>
  <li><a href="/roadmap/#v1.4">Backlog for Version 1.4</a></li>
  <li><a href="/roadmap/#v1.x">Backlog for Version 1.x</a></li>
</ul></div>
    </li>	  </ul>
	</div><!-- #first .widget-area -->




      </div><!-- #footer-widget-area -->


<!-- #site-generator -->

    </div><!-- #colophon -->

        <div class="copy">
            Copyright 2013 ArangoDB | <a href="/imprint">Imprint</a>
        </div>

  </div><!-- #footer -->

</body>
</html>