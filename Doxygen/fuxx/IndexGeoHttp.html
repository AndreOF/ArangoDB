<!DOCTYPE html>
<html lang="en-US" prefix="og: http://ogp.me/ns#">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />


<link rel="shortcut icon" type="image/x-icon" href="http://www.arangodb.org/wp-content/themes/triagens/images/favicon.ico">

<link rel="profile" href="http://gmpg.org/xfn/11" />
<link rel="stylesheet" type="text/css" media="all" href="http://www.arangodb.org/wp-content/themes/triagens-child/style.css" />
<link rel="pingback" href="" />


<!-- This site is optimized with the Yoast WordPress SEO plugin v1.4.4 - http://yoast.com/wordpress/seo/ -->
<title>ArangoDB Manual Pages - ArangoDB</title>
<meta name="description" content="ArangoDB Manual Pages"/>
<link rel="canonical" href="http://www.arangodb.org/manualredirector" />
<meta property='og:locale' content='en_US'/>
<meta property='og:title' content='ArangoDB Manual Pages - ArangoDB'/>
<meta property='og:description' content='ArangoDB Manual Pages'/>
<meta property='og:url' content='http://www.arangodb.org/manualredirector'/>
<meta property='og:site_name' content='ArangoDB'/>
<meta property='og:type' content='article'/>
<!-- / Yoast WordPress SEO plugin. -->

<link rel="alternate" type="application/rss+xml" title="ArangoDB &raquo; Feed" href="http://www.arangodb.org/feed" />
<link rel="alternate" type="application/rss+xml" title="ArangoDB &raquo; Comments Feed" href="http://www.arangodb.org/comments/feed" />
<link rel='stylesheet' id='wordpress-popular-posts-css'  href='http://www.arangodb.org/wp-content/plugins/wordpress-popular-posts/style/wpp.css?ver=3.5.1' type='text/css' media='all' />
<link rel='stylesheet' id='wp-syntax-css-css'  href='http://www.arangodb.org/wp-content/plugins/wp-syntax/css/wp-syntax.css?ver=1.0' type='text/css' media='all' />
<script type='text/javascript' src='http://www.arangodb.org/wp-includes/js/jquery/jquery.js?ver=1.8.3'></script>
<script type='text/javascript' src='http://www.arangodb.org/wp-includes/js/comment-reply.min.js?ver=3.5.1'></script>

    <style type="text/css">
    body {
    margin-top: -28px;
    padding-bottom: 28px;
    }
    body.admin-bar #wphead {
       padding-top: 0;
    }
    body.admin-bar #footer {
       padding-bottom: 28px;
    }
<link type="text/css" media="screen" rel="stylesheet" href="http://www.arangodb.org/wp-content/plugins/tweet-blender/css/tweets.css" />

    <style media="print" type="text/css">
      div.faq_answer {display: block!important;}
      p.faq_nav {display: none;}
    </style>


</head>

<body class="page page-id-1410 page-template page-template-onecolumn-page-php">

    <div id="access" role="navigation">
        <div id="nav">
            <a href="http://www.arangodb.org/" title="ArangoDB" id="branding"><img src="/wp-content/themes/triagens/images/logo_arangob_white.gif" width="154" height="34" alt="ArangoDB"></a>
            <div class="menu-header"><ul id="menu-home" class="menu"><li id="menu-item-184" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-184"><a href="http://www.arangodb.org/">Home</a></li>
<li id="menu-item-1345" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1345"><a href="http://www.arangodb.org/try">Try it out</a></li>
<li id="menu-item-279" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-279"><a href="http://www.arangodb.org/documentation">Documentation</a></li>
<li id="menu-item-95" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-95"><a href="http://www.arangodb.org/roadmap">Roadmap</a></li>
<li id="menu-item-71" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-71"><a href="http://www.arangodb.org/download">Downloads</a></li>
<li id="menu-item-1299" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1299"><a href="http://www.arangodb.org/api">Drivers</a></li>
<li id="menu-item-156" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-156"><a href="http://www.arangodb.org/blog">Blog</a></li>
</ul></div>            <div class="clear_both"></div>
        </div>
    </div><!-- #access -->

  <div id="surrounding">

    <div id="wrapper" class="hfeed">
	<div id="main">

    <div id="fullsize" class="one-column">
      <div id="content" role="main">



            <div id="post-1410" class="post-1410 page type-page status-publish hentry">
                    <h2 class="entry-title">ArangoDB Manual Pages</h2>

	  <div class="entry-content">

<link id="arangodb.css" type="text/css" href="arangodb.css" rel="stylesheet">
</div>
<div id="manual_search">
<form action="/" id="searchform" method="get" role="search">
  <div><label for="s" class="screen-reader-text">Search for:</label>
    <input type="text" id="s" name="s" value="" />
    <input type="submit" value="Search" id="searchsubmit" />
  </div>
</form>
</div>
<div class="clear_both"></div>
<hr />
<div class="arangodb">
<div>
<!-- Generated by Doxygen 1.8.2 -->
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Accessing Geo Indexes via Http </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"> <div class="navigate"><a href="IndexSkiplistHttp.html">prev</a> | <a href="ImplementorManual.html">home</a> | <a href="IndexFulltextHttp.html">next</a></div>  <div class="toc"><ul>
<li><a class="el" href="IndexGeoHttp.html">Accessing Geo Indexes via Http</a><ul>
<li><a class="el" href="IndexGeoHttp.html#IndexGeoHttpEnsureGeo">POST /_api/index</a></li>
<li><a class="el" href="IndexGeoHttp.html#IndexGeoHttpNear">PUT /_api/simple/near</a></li>
<li><a class="el" href="IndexGeoHttp.html#IndexGeoHttpWithin">PUT /_api/simple/within</a> </li>
</ul>
</li>
</ul>
  </div> <a class="anchor" id="IndexGeoHttpEnsureGeo"></a> </p><div class="restheader">POST /_api/index<div class="restheaderremark">(creates a geo-spatial index)</div></div> <H3>Query parameters</H3> <div class="restqueryparam">collection (string,required)</div> The collection name. <H3>Body parameters</H3><div class="restbodyparam">index-details (json,required)</div> <H3 class="space-before">Description</H3>Creates a geo-spatial index in the collection <code>collection-name</code>, if it does not already exist. Expects an object containing the index details.<ul>
<li><code>type</code>: must be equal to <code>"geo"</code>.</li>
</ul>
<ul>
<li><p class="startli"><code>fields</code>: A list with one or two attribute paths.</p>
<p class="startli">If it is a list with one attribute path <code>location</code>, then a geo-spatial index on all documents is created using <code>location</code> as path to the coordinates. The value of the attribute must be a list with at least two double values. The list must contain the latitude (first value) and the longitude (second value). All documents, which do not have the attribute path or with value that are not suitable, are ignored.</p>
<p class="startli">If it is a list with two attribute paths <code>latitude</code> and <code>longitude</code>, then a geo-spatial index on all documents is created using <code>latitude</code> and <code>longitude</code> as paths the latitude and the longitude. The value of the attribute <code>latitude</code> and of the attribute <code>longitude</code> must a double. All documents, which do not have the attribute paths or which values are not suitable, are ignored.</p>
</li>
</ul>
<ul>
<li><code>geoJson</code>: If a geo-spatial index on a <code>location</code> is constructed and <code>geoJson</code> is <code>true</code>, then the order within the list is longitude followed by latitude. This corresponds to the format described in <a href="http://geojson.org/geojson-spec.html#positions">http://geojson.org/geojson-spec.html#positions</a></li>
</ul>
<ul>
<li><code>constraint</code>: If <code>constraint</code> is <code>true</code>, then a geo-spatial constraint is created. The constraint is a non-unique variant of the index. Note that it is also possible to set the <code>unique</code> attribute instead of the <code>constraint</code> attribute.</li>
</ul>
<ul>
<li><code>ignoreNull</code>: If a geo-spatial constraint is created and <code>ignoreNull</code> is true, then documents with a null in <code>location</code> or at least one null in <code>latitude</code> or <code>longitude</code> are ignored.</li>
</ul>
 <H3>Return codes</H3> <p></p><div class="restreturncode">HTTP 200</div> If the index already exists, then a <code>HTTP 200</code> is returned. <p></p><div class="restreturncode">HTTP 201</div> If the index does not already exist and could be created, then a <code>HTTP 201</code> is returned. <p></p><div class="restreturncode">HTTP 404</div> If the <code>collection-name</code> is unknown, then a <code>HTTP 404</code> is returned. <H3>Examples</H3>Creating a geo index with a location attribute:<pre class="fragment">unix&gt; curl -X POST --data @- --dump - http://localhost:8529/_api/index?collection=products
{ "type": "geo", "fields" : [ "b" ] }

HTTP/1.1 201 Created
content-type: application/json; charset=utf-8

{ 
  "id" : "products/158164113", 
  "type" : "geo1", 
  "unique" : false, 
  "geoJson" : false, 
  "constraint" : false, 
  "fields" : [ 
    "b" 
  ], 
  "isNewlyCreated" : true, 
  "error" : false, 
  "code" : 201 
}

</pre><p> Creating a geo index with latitude and longitude attributes:<pre class="fragment">unix&gt; curl -X POST --data @- --dump - http://localhost:8529/_api/index?collection=products
{ "type": "geo", "fields" : [ "e", "f" ] }

HTTP/1.1 201 Created
content-type: application/json; charset=utf-8

{ 
  "id" : "products/159081617", 
  "type" : "geo2", 
  "unique" : false, 
  "constraint" : false, 
  "fields" : [ 
    "e", 
    "f" 
  ], 
  "isNewlyCreated" : true, 
  "error" : false, 
  "code" : 201 
}

</pre> </p>
<p><a class="anchor" id="IndexGeoHttpNear"></a> </p><div class="restheader">PUT /_api/simple/near<div class="restheaderremark">(executes simple query NEAR)</div></div> <H3>Body parameters</H3><div class="restbodyparam">query (string,required)</div> Contains the query. <H3 class="space-before">Description</H3>The default will find at most 100 documents near a given coordinate. The returned list is sorted according to the distance, with the nearest document coming first. If there are near documents of equal distance, documents are chosen randomly from this set until the limit is reached.In order to use the <code>near</code> operator, a geo index must be defined for the collection. This index also defines which attribute holds the coordinates for the document. If you have more then one geo-spatial index, you can use the <code>geo</code> field to select a particular index.The call expects a JSON hash array as body with the following attributes:<ul>
<li><code>collection</code>: The name of the collection to query.</li>
</ul>
<ul>
<li><code>latitude</code>: The latitude of the coordinate.</li>
</ul>
<ul>
<li><code>longitude</code>: The longitude of the coordinate.</li>
</ul>
<ul>
<li><code>distance</code>: If given, the attribute key used to store the distance. (optional)</li>
</ul>
<ul>
<li><code>skip</code>: The number of documents to skip in the query. (optional)</li>
</ul>
<ul>
<li><code>limit</code>: The maximal amount of documents to return. The <code>skip</code> is applied before the <code>limit</code> restriction. The default is 100. (optional)</li>
</ul>
<ul>
<li><code>geo</code>: If given, the identifier of the geo-index to use. (optional)</li>
</ul>
Returns a cursor containing the result, see <a class="el" href="HttpCursor.html">HTTP Interface for AQL Query Cursors</a> for details. <H3>Return codes</H3> <p></p><div class="restreturncode">HTTP 201</div> is returned if the return set contains at least one document and <code>waitForSync</code> was <code>true</code>. <p></p><div class="restreturncode">HTTP 400</div> is returned if the body does not contain a valid JSON representation of a document. The response body contains an error document in this case. <p></p><div class="restreturncode">HTTP 404</div> is returned if the collection specified by <code>collection</code> is unknown. The response body contains an error document in this case. <H3>Examples</H3>Without distance:<pre class="fragment">unix&gt; curl -X PUT --data @- --dump - http://localhost:8529/_api/simple/near
{ "collection": "products", "latitude" : 0, "longitude" : 0, "skip" : 1, "limit" : 2 }

HTTP/1.1 201 Created
content-type: application/json; charset=utf-8

{ 
  "result" : [ 
    { 
      "_id" : "products/174089361", 
      "_rev" : "174089361", 
      "_key" : "174089361", 
      "name" : "Name/0.002/", 
      "loc" : [ 
        0.002, 
        0 
      ] 
    }, 
    { 
      "_id" : "products/173696145", 
      "_rev" : "173696145", 
      "_key" : "173696145", 
      "name" : "Name/-0.002/", 
      "loc" : [ 
        -0.002, 
        0 
      ] 
    } 
  ], 
  "hasMore" : false, 
  "count" : 2, 
  "error" : false, 
  "code" : 201 
}

</pre><p> With distance:<pre class="fragment">unix&gt; curl -X PUT --data @- --dump - http://localhost:8529/_api/simple/near
{ "collection": "products", "latitude" : 0, "longitude" : 0, "skip" : 1, "limit" : 3, "distance" : "distance" }

HTTP/1.1 201 Created
content-type: application/json; charset=utf-8

{ 
  "result" : [ 
    { 
      "_id" : "products/177104017", 
      "_rev" : "177104017", 
      "_key" : "177104017", 
      "distance" : 222.38985328911744, 
      "name" : "Name/-0.002/", 
      "loc" : [ 
        -0.002, 
        0 
      ] 
    }, 
    { 
      "_id" : "products/177497233", 
      "_rev" : "177497233", 
      "_key" : "177497233", 
      "distance" : 222.38985328911744, 
      "name" : "Name/0.002/", 
      "loc" : [ 
        0.002, 
        0 
      ] 
    }, 
    { 
      "_id" : "products/176907409", 
      "_rev" : "176907409", 
      "_key" : "176907409", 
      "distance" : 444.779706578235, 
      "name" : "Name/-0.004/", 
      "loc" : [ 
        -0.004, 
        0 
      ] 
    } 
  ], 
  "hasMore" : false, 
  "count" : 3, 
  "error" : false, 
  "code" : 201 
}

</pre> </p>
<p><a class="anchor" id="IndexGeoHttpWithin"></a> </p><div class="restheader">PUT /_api/simple/within<div class="restheaderremark">(executes simple query WITHIN)</div></div> <H3>Body parameters</H3><div class="restbodyparam">query (string,required)</div> Contains the query. <H3 class="space-before">Description</H3>This will find all documents with in a given radius around the coordinate (<code>latitude</code>, <code>longitude</code>). The returned list is sorted by distance.In order to use the <code>within</code> operator, a geo index must be defined for the collection. This index also defines which attribute holds the coordinates for the document. If you have more then one geo-spatial index, you can use the <code>geo</code> field to select a particular index.The call expects a JSON hash array as body with the following attributes:<ul>
<li><code>collection</code>: The name of the collection to query.</li>
</ul>
<ul>
<li><code>latitude</code>: The latitude of the coordinate.</li>
</ul>
<ul>
<li><code>longitude</code>: The longitude of the coordinate.</li>
</ul>
<ul>
<li><code>radius</code>: The maximal radius (in meters).</li>
</ul>
<ul>
<li><code>distance</code>: If given, the result attribute key used to store the distance values (optional). If specified, distances are returned in meters.</li>
</ul>
<ul>
<li><code>skip</code>: The documents to skip in the query. (optional)</li>
</ul>
<ul>
<li><code>limit</code>: The maximal amount of documents to return. (optional)</li>
</ul>
<ul>
<li><code>geo</code>: If given, the identifier of the geo-index to use. (optional)</li>
</ul>
Returns a cursor containing the result, see <a class="el" href="HttpCursor.html">HTTP Interface for AQL Query Cursors</a> for details. <H3>Return codes</H3> <p></p><div class="restreturncode">HTTP 201</div> is returned if the return set contains at least one document and <code>waitForSync</code> was <code>true</code>. <p></p><div class="restreturncode">HTTP 400</div> is returned if the body does not contain a valid JSON representation of a document. The response body contains an error document in this case. <p></p><div class="restreturncode">HTTP 404</div> is returned if the collection specified by <code>collection</code> is unknown. The response body contains an error document in this case. <H3>Examples</H3>Without distance:<pre class="fragment">unix&gt; curl -X PUT --data @- --dump - http://localhost:8529/_api/simple/near
{ "collection": "products", "latitude" : 0, "longitude" : 0, "skip" : 1, "limit" : 2, "radius" : 500 }

HTTP/1.1 201 Created
content-type: application/json; charset=utf-8

{ 
  "result" : [ 
    { 
      "_id" : "products/180905105", 
      "_rev" : "180905105", 
      "_key" : "180905105", 
      "name" : "Name/0.002/", 
      "loc" : [ 
        0.002, 
        0 
      ] 
    }, 
    { 
      "_id" : "products/180511889", 
      "_rev" : "180511889", 
      "_key" : "180511889", 
      "name" : "Name/-0.002/", 
      "loc" : [ 
        -0.002, 
        0 
      ] 
    } 
  ], 
  "hasMore" : false, 
  "count" : 2, 
  "error" : false, 
  "code" : 201 
}

</pre><p> With distance:<pre class="fragment">unix&gt; curl -X PUT --data @- --dump - http://localhost:8529/_api/simple/near
{ "collection": "products", "latitude" : 0, "longitude" : 0, "skip" : 1, "limit" : 3, "distance" : "distance", "radius" : 300 }

HTTP/1.1 201 Created
content-type: application/json; charset=utf-8

{ 
  "result" : [ 
    { 
      "_id" : "products/183919761", 
      "_rev" : "183919761", 
      "_key" : "183919761", 
      "distance" : 222.38985328911744, 
      "name" : "Name/-0.002/", 
      "loc" : [ 
        -0.002, 
        0 
      ] 
    }, 
    { 
      "_id" : "products/184312977", 
      "_rev" : "184312977", 
      "_key" : "184312977", 
      "distance" : 222.38985328911744, 
      "name" : "Name/0.002/", 
      "loc" : [ 
        0.002, 
        0 
      ] 
    }, 
    { 
      "_id" : "products/183723153", 
      "_rev" : "183723153", 
      "_key" : "183723153", 
      "distance" : 444.779706578235, 
      "name" : "Name/-0.004/", 
      "loc" : [ 
        -0.004, 
        0 
      ] 
    } 
  ], 
  "hasMore" : false, 
  "count" : 3, 
  "error" : false, 
  "code" : 201 
}

</pre>  </p>
</div></div><!-- contents -->
</div>


	  </div><!-- .entry-content -->
	</div><!-- #post-## -->


      <div id="comments">


  <p class="nocomments">Comments are closed.</p>



</div><!-- #comments -->


      </div><!-- #content -->
    </div><!-- #container -->

  <div style="clear:both;"></div>
  </div><!-- #main -->



</div><!-- #wrapper -->
</div><!-- #surrounding -->


  <div id="footer" role="contentinfo">
    <div id="colophon">




      <div id="footer-widget-area" role="complementary">

	<div id="first" class="widget-area">
	  <ul class="xoxo">
		<li id="recent-posts-4" class="widget-container widget_recent_entries">	  <h3 class="widget-title">Recent Posts</h3>	<ul>
	  <li>
	<a href="http://www.arangodb.org/2013/05/22/replication-and-sharding-in-arangodb" title="Our plans on replication and sharding in ArangoDB">Our plans on replication and sharding in ArangoDB</a>
	    </li>
	  <li>
	<a href="http://www.arangodb.org/2013/05/14/ideas-and-facts-from-scotland-js-in-edinburgh" title="Ideas and Facts from scotland.js in Edinburgh">Ideas and Facts from scotland.js in Edinburgh</a>
	    </li>
	  <li>
	<a href="http://www.arangodb.org/2013/05/12/arangodb-1-3-0-released" title="ArangoDB 1.3.0 released">ArangoDB 1.3.0 released</a>
	    </li>
	  <li>
	<a href="http://www.arangodb.org/2013/05/06/foxx-screencast-part-2" title="Foxx Screencast: Part 2">Foxx Screencast: Part 2</a>
	    </li>
	</ul>
    </li><li id="text-5" class="widget-container widget_text"><h3 class="widget-title">Documentation</h3>     <div class="textwidget"><ul>
  <li><a href="/quickstart">First step tutorial</a></li>
  <li><a href="/manuals">Manual/documentation (HTML/PDF)</a></li>
  <li><a href="/manuals/arangodb_1.0_shell_reference_card.pdf">ArangoDB Shell Reference Card (HTML/PDF)</a></li>
  <li><a href="/try">Try ArangoDB online</a></li>
  <li><a href="/api">API clients & 3rd party libs</a></li>
        <li><a href="/logos">ArangoDB artwork/logos</a></li>
</ul>
</div>
    </li><li id="text-7" class="widget-container widget_text"><h3 class="widget-title">Social Links</h3>      <div class="textwidget"><ul>
  <li><a href="https://twitter.com/arangodb">ArangoDB on Twitter</a></li>
  <li><a href="https://groups.google.com/group/arangodb">ArangoDB Google Group</a></li>
  <li><a href="http://stackoverflow.com/questions/tagged/arangodb">ArangoDB questions on StackOverflow</a></li>
  <li><a href="https://github.com/triagens/arangodb/issues?state=open">Issue Tracker at Github</a></li>
</ul></div>
    </li><li id="text-6" class="widget-container widget_text"><h3 class="widget-title">Roadmap</h3>	<div class="textwidget"><ul>
  <li><a href="/roadmap/#v1.4">Backlog for Version 1.4</a></li>
  <li><a href="/roadmap/#v1.x">Backlog for Version 1.x</a></li>
</ul></div>
    </li>	  </ul>
	</div><!-- #first .widget-area -->




      </div><!-- #footer-widget-area -->


<!-- #site-generator -->

    </div><!-- #colophon -->

        <div class="copy">
            Copyright 2013 ArangoDB | <a href="/imprint">Imprint</a>
        </div>

  </div><!-- #footer -->

</body>
</html>