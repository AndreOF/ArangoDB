<!DOCTYPE html>
<html lang="en-US" prefix="og: http://ogp.me/ns#">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />


<link rel="shortcut icon" type="image/x-icon" href="http://www.arangodb.org/wp-content/themes/triagens/images/favicon.ico">

<link rel="profile" href="http://gmpg.org/xfn/11" />
<link rel="stylesheet" type="text/css" media="all" href="http://www.arangodb.org/wp-content/themes/triagens-child/style.css" />
<link rel="pingback" href="" />


<!-- This site is optimized with the Yoast WordPress SEO plugin v1.4.4 - http://yoast.com/wordpress/seo/ -->
<title>ArangoDB Manual Pages - ArangoDB</title>
<meta name="description" content="ArangoDB Manual Pages"/>
<link rel="canonical" href="http://www.arangodb.org/manualredirector" />
<meta property='og:locale' content='en_US'/>
<meta property='og:title' content='ArangoDB Manual Pages - ArangoDB'/>
<meta property='og:description' content='ArangoDB Manual Pages'/>
<meta property='og:url' content='http://www.arangodb.org/manualredirector'/>
<meta property='og:site_name' content='ArangoDB'/>
<meta property='og:type' content='article'/>
<!-- / Yoast WordPress SEO plugin. -->

<link rel="alternate" type="application/rss+xml" title="ArangoDB &raquo; Feed" href="http://www.arangodb.org/feed" />
<link rel="alternate" type="application/rss+xml" title="ArangoDB &raquo; Comments Feed" href="http://www.arangodb.org/comments/feed" />
<link rel='stylesheet' id='wordpress-popular-posts-css'  href='http://www.arangodb.org/wp-content/plugins/wordpress-popular-posts/style/wpp.css?ver=3.5.1' type='text/css' media='all' />
<link rel='stylesheet' id='wp-syntax-css-css'  href='http://www.arangodb.org/wp-content/plugins/wp-syntax/css/wp-syntax.css?ver=1.0' type='text/css' media='all' />
<script type='text/javascript' src='http://www.arangodb.org/wp-includes/js/jquery/jquery.js?ver=1.8.3'></script>
<script type='text/javascript' src='http://www.arangodb.org/wp-includes/js/comment-reply.min.js?ver=3.5.1'></script>

    <style type="text/css">
    body {
    margin-top: -28px;
    padding-bottom: 28px;
    }
    body.admin-bar #wphead {
       padding-top: 0;
    }
    body.admin-bar #footer {
       padding-bottom: 28px;
    }
<link type="text/css" media="screen" rel="stylesheet" href="http://www.arangodb.org/wp-content/plugins/tweet-blender/css/tweets.css" />

    <style media="print" type="text/css">
      div.faq_answer {display: block!important;}
      p.faq_nav {display: none;}
    </style>


</head>

<body class="page page-id-1410 page-template page-template-onecolumn-page-php">

    <div id="access" role="navigation">
        <div id="nav">
            <a href="http://www.arangodb.org/" title="ArangoDB" id="branding"><img src="/wp-content/themes/triagens/images/logo_arangob_white.gif" width="154" height="34" alt="ArangoDB"></a>
            <div class="menu-header"><ul id="menu-home" class="menu"><li id="menu-item-184" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-184"><a href="http://www.arangodb.org/">Home</a></li>
<li id="menu-item-1345" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1345"><a href="http://www.arangodb.org/try">Try it out</a></li>
<li id="menu-item-279" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-279"><a href="http://www.arangodb.org/documentation">Documentation</a></li>
<li id="menu-item-95" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-95"><a href="http://www.arangodb.org/roadmap">Roadmap</a></li>
<li id="menu-item-71" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-71"><a href="http://www.arangodb.org/download">Downloads</a></li>
<li id="menu-item-1299" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1299"><a href="http://www.arangodb.org/api">Drivers</a></li>
<li id="menu-item-156" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-156"><a href="http://www.arangodb.org/blog">Blog</a></li>
</ul></div>            <div class="clear_both"></div>
        </div>
    </div><!-- #access -->

  <div id="surrounding">

    <div id="wrapper" class="hfeed">
	<div id="main">

    <div id="fullsize" class="one-column">
      <div id="content" role="main">



            <div id="post-1410" class="post-1410 page type-page status-publish hentry">
                    <h2 class="entry-title">ArangoDB Manual Pages</h2>

	  <div class="entry-content">

<link id="arangodb.css" type="text/css" href="arangodb.css" rel="stylesheet">
</div>
<div id="manual_search">
<form action="/" id="searchform" method="get" role="search">
  <div><label for="s" class="screen-reader-text">Search for:</label>
    <input type="text" id="s" name="s" value="" />
    <input type="submit" value="Search" id="searchsubmit" />
  </div>
</form>
</div>
<div class="clear_both"></div>
<hr />
<div class="arangodb">
<div>
<!-- Generated by Doxygen 1.8.2 -->
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Upgrading to ArangoDB 1.2 </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"> <div class="navigate"><a href="NewFeatures12.html">prev</a> | <a href="Home.html">home</a> | <a href="NewFeatures11.html">next</a></div>  <div class="toc"><ul>
<li><a class="el" href="Upgrading12.html#Upgrading12Introduction">Upgrading </a><ul>
<li><a class="el" href="Upgrading12.html#Upgrading12VersionCheck">Database Directory Version Check and Upgrade </a></li>
<li><a class="el" href="Upgrading12.html#UpgradingBinaryPackage">Upgrade a binary package </a></li>
</ul>
</li>
<li><a class="el" href="Upgrading12.html#Upgrading12Troubleshooting">Troubleshooting</a></li>
<li><a class="el" href="Upgrading12.html#Upgrading12APIChanges">API changes in ArangoDB 1.2 </a></li>
<li><a class="el" href="Upgrading12.html#Upgrading12ConfigChanges">File Layout </a></li>
<li><a class="el" href="Upgrading12.html#Upgrading12RemovedFeatures">Removed Features </a><ul>
<li><a class="el" href="Upgrading12.html#Upgrading12RemovedFunctionality">Removed Functionality </a> </li>
</ul>
</li>
</ul>
  </div> <h2><a class="anchor" id="Upgrading12Introduction"></a>
Upgrading </h2>
<p>ArangoDB 1.2 provides a lot of new features and APIs when compared to ArangoDB 1.1.</p>
<p>In addition, a few of the existing APIs have changed in ArangoDB 1.2 to exploit some of the new features and to make using ArangoDB even easier. This causes some backwards-incompatibilities but is unavoidable to make the new features available to end users.</p>
<p>The following list contains changes in ArangoDB 1.2 that are not 100% downwards-compatible to ArangoDB 1.1 (and partly, to ArangoDB 1.0).</p>
<p>Existing users of ArangoDB 1.1 should read the list carefully and make sure they have undertaken all necessary steps and precautions before upgrading from ArangoDB 1.1 to ArangoDB 1.2. Please also check <a class="el" href="Upgrading12.html#Upgrading12Troubleshooting">Troubleshooting</a>.</p>
<h3>32 Bit Systems</h3>
<p>As the GCC uses a different padding for C structure under 32bit systems compared to 64bit systems, the 1.1 datafiles were not interchangeable. 1.2 fixes this problem.</p>
<p>There is however one caveat: If you already installed 1.2.beta1 on a 32bit system, the upgrade will no longer worker. In this case you need to export the data first, upgrade ArangoDB, and import the data again. There is no problem, if you upgrade from 1.1 to 1.2.beta2.</p>
<h3><a class="anchor" id="Upgrading12VersionCheck"></a>
Database Directory Version Check and Upgrade </h3>
<p>Starting with ArangoDB 1.1, <em>arangod</em> will perform a database version check at startup. This has not changed in ArangoDB 1.2.</p>
<p>The version check will look for a file named <em>VERSION</em> in its database directory. If the file is not present, <em>arangod</em> in version 1.2 will perform an auto-upgrade (can also be considered a database "initialisation"). This auto-upgrade will create the system collections necessary to run ArangoDB, and it will also create the VERSION file with a version number of <code>1.2</code> inside.</p>
<p>If the <em>VERSION</em> file is present but is from a non-matching version of ArangoDB (e.g. ArangoDB 1.1 if you upgrade), <em>arangod</em> will refuse to start. Instead, it will ask you start the server with the option <code>--upgrade</code>. Using the <code>--upgrade</code> option will make the server trigger any required upgrade tasks to migrate data from ArangoDB 1.1 to ArangoDB 1.2.</p>
<p>This manual invocation of an upgrade shall ensure that users have full control over when they perform any updates/upgrades of their data, and do not risk running an incompatible tandem of server and database versions.</p>
<p>If you try starting an ArangoDB 1.2 server with a database created by an earlier version of ArangoDB, and did not invoke the upgrade procedure, the output of ArangoDB will look like this: </p>
<pre class="fragment">&gt; bin/arangod --server.endpoint tcp://127.0.0.1:8529 --database.directory /tmp/11

...
2013-02-06T14:44:35Z [4399] ERROR Database directory version (1.1) is lower than server version (1.3).
2013-02-06T14:44:35Z [4399] ERROR It seems like you have upgraded the ArangoDB binary. If this is what you wanted to do, please restart with the --upgrade option to upgrade the data in the database directory.
2013-02-06T14:44:35Z [4399] FATAL Database version check failed. Please start the server with the --upgrade option
...
</pre><p>So it is really necessary to forcefully invoke the upgrade procedure. Please create a backup of your database directory before upgrading. Please also make sure that the database directory and all subdirectories and files in it are writeable for the user you run ArangoDB with.</p>
<p>As mentioned, invoking the upgrade procedure can be done by specifying the additional command line option <code>--upgrade</code> as follows: </p>
<pre class="fragment">&gt; bin/arangod --server.endpoint tcp://127.0.0.1:8529 --database.directory /tmp/11 --upgrade

...
2013-02-06T14:47:36Z [4482] INFO Starting upgrade from version 1.1 to 1.2.beta1
2013-02-06T14:47:36Z [4482] INFO Found 12 defined task(s), 3 task(s) to run
2013-02-06T14:47:36Z [4482] INFO Executing task #1 (upgradeMarkers12): update markers in all collection datafiles
2013-02-06T14:48:18Z [4482] INFO Task successful
2013-02-06T14:48:18Z [4482] INFO Executing task #2 (setupStructures): setup _structures collection
2013-02-06T14:48:18Z [4482] INFO Task successful
2013-02-06T14:48:18Z [4482] INFO Executing task #3 (createStructuresIndex): create index on collection attribute in _structures collection
2013-02-06T14:48:19Z [4482] INFO Task successful
2013-02-06T14:48:19Z [4482] INFO Upgrade successfully finished
...
</pre><p>The upgrade procecure will execute the defined tasks to run <em>arangod</em> with all new features and data formats. It should normally run without problems and indicate success at its end. If it detects a problem that it cannot fix, it will halt on the first error and warn you.</p>
<p>Re-starting arangod with the <code>--upgrade</code> option will execute only the previously failed and not yet executed tasks.</p>
<p>Upgrading from ArangoDB 1.1 to ArangoDB 1.2 will modify some header data inside the collection datafiles. The upgrade procedure will create a backup of all collection files it processes, in case something goes wrong.</p>
<p>In case the upgrade did not produce any problems and ArangoDB works well for you after the upgrade, you may want to remove these backup files manually.</p>
<p>All collection datafiles will be backed up in the original collection directories in the database directory. You can easily detect the backup files because they have a filename ending in <code>.old</code>.</p>
<p>Please note that the upgrade behavior in 1.2 was slightly changed compared to 1.1:</p>
<ul>
<li>in 1.1, when starting <code>arangod</code> with <code>--upgrade</code>, the server performed the upgrade, and if the upgrade was successfully, continued to work in either daemon or console mode.</li>
</ul>
<ul>
<li>in 1.2, when started with the <code>--upgrade</code> option, the server will perfom the upgrade, and then exit with a status code indicating the result of the upgrade (0 = success, 1 = failure). To start the server regularly in either daemon or console mode, the <code>--upgrade</code> option must not be specified. This change was introduced to allow init.d scripts check the result of the upgrade procedure, even in case an upgrade was successful.</li>
</ul>
<h3><a class="anchor" id="UpgradingBinaryPackage"></a>
Upgrade a binary package </h3>
<p>Linux:</p>
<ul>
<li>Upgrade ArangoDB by package manager (Example <code>zypper update arangodb</code>)</li>
<li>check configuration file: <code>/etc/arangodb/arangod.conf</code></li>
<li>Upgrade database files with <code>/etc/init.d/arangodb upgrade</code></li>
</ul>
<p>Mac OS X binary package</p>
<ul>
<li>You can find the new Mac OS X packages here: <code><a href="http://www.arangodb.org/repositories/MacOSX">http://www.arangodb.org/repositories/MacOSX</a></code></li>
<li>check configuration file: <code>/etc/arangodb/arangod.conf</code></li>
<li>Upgrade database files `/usr/sbin/arangod &ndash;upgrade'</li>
</ul>
<p>Mac OS X with homebrew</p>
<ul>
<li>Upgrade ArangoDB by `brew upgrade arangodb'</li>
<li>check configuration file: <code>/usr/local/Cellar/1.X.Y/etc/arangodb/arangod.conf</code></li>
<li>Upgrade database files <code>/usr/local/sbin/arangod --upgrade</code></li>
</ul>
<h2><a class="anchor" id="Upgrading12Troubleshooting"></a>
Troubleshooting</h2>
<h3>Problem: ArangoDB fails on startup with "directory not writable"</h3>
<p>ArangoDB 1.2 will check on startup whether the database directory and all collection directories in it are writeable for the user ArangoDB is started with. This check has been added to prevent errors caused by ArangoDB not having permissions to write to its own database directory.</p>
<p>When the server is started and ArangoDB detects that one of the directories is not writeable, it will abort with a message as follows: </p>
<pre class="fragment">...
2013-02-06T15:10:09Z [5034] ERROR database directory '/tmp/migrate' is not writable for current user
2013-02-06T15:07:46Z [4990] FATAL cannot open database '/tmp/migrate'
...
</pre><p>or </p>
<pre class="fragment">...
2013-02-06T15:07:46Z [4990] ERROR database subdirectory '/tmp/migrate/collection-33374320' is not writable for current user
2013-02-06T15:07:46Z [4990] FATAL cannot open database '/tmp/migrate'
...
</pre><p>If this happens, please make sure the user that ArangoDB is run with has all necessary privileges (especially write privileges) for the database directory, the collection subdirectories and files in it.</p>
<h3>Problem: How to create a new ArangoDB user?</h3>
<p>In ArangoDB 1.0 and 1.1, ArangoDB provided a separate shell script named "arango-password" to create new users for ArangoDB. Using this shell script required exclusive access to the database so this was no proper solution.</p>
<p>Starting with ArangoDB 1.2, users can be managed from ArangoDB itself.</p>
<p>For example, <code>arangosh</code> can be used to add, update, and change users. Example: </p>
<pre class="fragment">arangosh&gt; var users = require("org/arangodb/users");
arangosh&gt; users.save("myuser@example.com", "examplepassword");
{ "error" : false, "_id" : "_users/316955178143", "_rev" : "316955178143", "_key" : "316955178143" }
</pre><p>To update the password of an existing user: </p>
<pre class="fragment">arangosh&gt; var users = require("org/arangodb/users");
arangosh&gt; users.replace("myuser@example.com", "newpassword");
{ "error" : false, "_id" : "_users/316955178143", "_rev" : "316955505823", "_key" : "316955178143" }
</pre><p>To remove an existing user: </p>
<pre class="fragment">arangosh&gt; users.remove("myuser@example.com");
true
</pre><p>Please note that any modifications to user data will be saved by ArangoDB in the <code>_users</code> system collection. The contents of this collection are cached. To flush the cache and reload the user data from this collection, you should run the following command in addition: </p>
<pre class="fragment">arangosh&gt; users.reload();
true
</pre><p>Please make sure that in case you specify a password in arangosh, you do not save the arangosh command history.</p>
<p>If the server is run with authentication turned on, <code>arangosh</code> can only connect to the server if username and password are specified when <code>arangosh</code> is started. If you do not have a username or a password of an existing user, you can use the ArangoDB emergency console to setup a new user. This should be considered the last resort, as the <code>arangod</code> emergency console requires exclusive access to the database, and cannot be used over a network connection.</p>
<p>To invoke the emergency console to manage users, do the following: </p>
<pre class="fragment">&gt; bin/arangod --console /tmp/voctest

ArangoDB JavaScript emergency console [V8 version 3.9.4, DB version 1.3.alpha]
arangod&gt; var users = require("org/arangodb/users");
arangod&gt; users.save("WillNever", "ForgetMyPasswordAgain");
{ "_id" : "_users/316955911976", "_rev" : "316955911976", "_key" : "316955911976" }
</pre><p>Please also refer to <a class="el" href="Upgrading11.html#Upgrading11Troubleshooting">Troubleshooting </a>.</p>
<h2><a class="anchor" id="Upgrading12APIChanges"></a>
API changes in ArangoDB 1.2 </h2>
<h3>Changed format for document handles (<code>_id</code>)</h3>
<p>ArangoDB 1.2 uses a modified format for the value returned in the <code>_id</code> attribute of a document. While ArangoDB 1.1 and earlier generated the <code>_id</code> value as a combination of server-generated collection id and document id, ArangoDB 1.2 will return a combination of collection name and user-defined document key.</p>
<p>A document returned by ArangoDB 1.1 and earlier looked like this: </p>
<pre class="fragment">{ "_id" : "1234/6789", ... }
</pre><p>with <code>1234</code> being the collection id, and <code>6789</code> being the document id.</p>
<p>In ArangoDB 1.2, the same document would look like this (provided the name of the collection is "mycollection"): </p>
<pre class="fragment">{ "_id" : "mycollection/6789", ... }
</pre><p>It is possible for users to define their own value for the <code>_key</code> attribute of a document upon document creation. In case the document was created with a <code>_key</code> value of <code>mytest</code>: </p>
<pre class="fragment">{ "_id" : "mycollection/mytest", ... }
</pre><h3><code>_key</code> attribute returned for documents</h3>
<p>In ArangoDB 1.2, all documents returned by the server will have an extra <code>_key</code> attribute. This attribute was not present in ArangoDB 1.1. The value of the <code>_key</code> attribute is a unique string (unique only in the context of the collection the document is contained in).</p>
<p>The value for <code>_key</code> is a server-generated value, or a user-generated value if the user provides <code>_key</code> values on document creation.</p>
<h3>Document revision id (<code>_rev</code>) returned as string</h3>
<p>Document revision ids created and returned by ArangoDB 1.2 are now returned as strings with the numeric revision id value inside. ArangoDB 1.0 and ArangoDB 1.1 returned revision ids as simple numeric values without encapsulating them in a string. The revision id is part of every document stored in ArangoDB and is returned by ArangoDB in the <code>_rev</code> attribute.</p>
<p>A document in ArangoDB 1.1 will be returned as follows: </p>
<pre class="fragment">{ "_rev": 1234, ... } 
</pre><p>whereas a document in ArangoDB 1.2 will be returned as follows: </p>
<pre class="fragment">{ "_rev": "1234", ... } 
</pre><p>The change was determined to be necessary to prevent potential value overrun/truncation in any part of the client/server workflow. The integer values returned by previous versions of ArangoDB may not work for clients that do not provide an arbitrary, or at least 64 bit, precision integer type. Clients that store big integers values in IEEE754 doubles are subject to precision loss if the values get too big.</p>
<p>The change affects both the internal Javascript APIs and the public REST APIs, primarily <a class="el" href="RestDocument.html">REST Interface for Documents</a> and <a class="el" href="RestEdge.html">REST Interface for Edges</a>.</p>
<p>Clients that are strictly typed may need to be adjusted to work with this change.</p>
<h3>Collection id returned as string</h3>
<p>The same change as for the document revision ids has been carried out for collection ids in ArangoDB 1.2. That means that collection ids in ArangoDB 1.2 will be returned as numeric values encapsulated in strings.</p>
<p>A collection object from ArangoDB 1.1 has looked like this: </p>
<pre class="fragment">{ "id": 9327643, "name": "test", ... }
</pre><p>A collection object returned by ArangoDB 1.2 looks like this: </p>
<pre class="fragment">{ "id": "9327643", "name": "test", ... }
</pre><p>This change affects the internal Javascript APIs that deal with collection ids, and all public REST APIs that return the collection id, mostly <a class="el" href="HttpCollection.html">HTTP Interface for Collections</a>).</p>
<p>Clients that are strictly typed may need to be adjusted to work with this change.</p>
<h3>Cursor ids returned as strings</h3>
<p>Cursor ids returned by ArangoDB are also returned as numeric values encapsulated in strings starting from ArangoDB 1.2. As with the other types, they have been returned as simple integers numbers in ArangoDB 1.1 and before.</p>
<p>A cursor object returned by ArangoDB 1.0 / 1.1 has looked like this: </p>
<pre class="fragment">{ "id": 11734292, "hasMore": true, ... } 
</pre><p>whereas a cursor object returned by ArangoDB 1.2 looks like this: </p>
<pre class="fragment">{ "id": "11734292", "hasMore": true, ... } 
</pre><p>This change affects the AQL query and cursor cursor management REST API (<a class="el" href="HttpCursor.html#HttpCursorHttp">Accessing Cursors via HTTP </a>).</p>
<p>Clients that are strictly typed may need to be adjusted to work with this change.</p>
<h3>Index ids returned as strings</h3>
<p>Index ids are also returned as numeric values encapsulated in strings starting with ArangoDB 1.2. They have been returned as simple integers in ArangoDB 1.1 and before.</p>
<p>This change affects the internal Javascript APIs that deal with index ids, and the public REST index API (<a class="el" href="HttpIndex.html">HTTP Interface for Indexes</a>).</p>
<p>Clients that are strictly typed may need to be adjusted to work with this change.</p>
<h3>Additional return attributes</h3>
<p>A few REST API functions return additional attributes in ArangoDB 1.2:</p>
<ul>
<li><code>GET /_api/collection/&lt;collection-name&gt;/figures</code> returns an extra attribute <code>shapes</code></li>
<li><code>GET /_api/collection/&lt;collection-name&gt;/figures</code> returns an extra attribute <code>isVolatile</code></li>
<li><code>GET /_api/collection/&lt;collection-name&gt;/properties</code> returns an extra attribute <code>isVolatile</code></li>
<li><code>GET /_api/collection/&lt;collection-name&gt;/count</code> returns an extra attribute <code>isVolatile</code></li>
</ul>
<p>Clients that are strictly typed may need to be adjusted to work with this change.</p>
<h3>Changed error return codes</h3>
<p>When an unknown collection was used in an AQL query, ArangoDB 1.1 and before returned the error code <code>1520</code> (<code>Unable to open collection</code>). ArangoDB 1.2 will instead return the standard error code <code>1203</code> (<code>Collection not found</code>), which is also returned by other parts of ArangoDB in case a non-existing collection is accessed.</p>
<p>When a collection was created with a name that was already in use for another collection, ArangoDB 1.1 returned an error code <code>1207</code> (<code>Duplicate name</code>) with an HTTP status code of <code>400</code> (<code>Bad request</code>). For this case, the HTTP status code has been changed to HTTP <code>409</code> (<code>Conflict</code>) in ArangoDB 1.2.</p>
<h2>Changes in available global variables and functions</h2>
<p>Some variables, functions, and objects have been removed from the global scope in ArangoDB 1.2, and have been moved into namespaced modules.</p>
<p>This change primarily affects usage of console features in <code>arangosh</code> and <code>arangod</code>, but may also affect custom user actions carried out by ArangoDB when used as an application server.</p>
<p>Most of the functions previously available in the global scope have been moved to the <code>internal</code> namespace, which can be made available from both <code>arangosh</code> and <code>arangod</code> as follows: </p>
<pre class="fragment">arangosh&gt; var internal = require("internal");
</pre><p>After that, there will be variable named <code>internal</code> which can be used as previously in ArangoDB 1.1.</p>
<p>For convenience, <code>arangosh</code> in ArangoDB 1.2 still provides the global object <code>db</code> to access all collections easily. However, the global <code>edges</code> variable is gone in ArangoDB 1.2. Instead of using the <code>edges</code> object to create or access a collection, use the <code>db</code> object in ArangoDB 1.2: </p>
<pre class="fragment">arangosh&gt; db._create("myCollection");
arangosh&gt; db._createEdgeCollection("myEdgeCollection");
arangosh&gt; db.myEdgeCollection.save(...);
</pre><p>In <code>arangod</code>, either in daemon mode or when running the emergency console, the following global variables are missing in ArangoDB 1.2:</p>
<ul>
<li><code>db</code>: can be made available by <code>var db = require("org/arangodb").db;</code></li>
<li><code>edges</code>: not needed in ArangoDB 1.2. Please use <code>db</code>'s functionality instead.</li>
<li><code>internal</code>: can be made available via <code>var internal = require("internal");</code></li>
</ul>
<h2><a class="anchor" id="Upgrading12ConfigChanges"></a>
File Layout </h2>
<p>The file locations for readline console history files have been unified in ArangoDB 1.2 as follows:</p>
<ul>
<li>the history for <code>arangod</code>'s emergency console is now stored in file <code>$HOME/.arangod</code>. It was stored in <code>$HOME/.arango</code> before.</li>
<li>the history for <code>arangosh</code> is still stored in file <code>$HOME/.arangosh</code> as before.</li>
<li>the history for <code>arangoirb</code> is now stored in file <code>$HOME/.arangoirb</code>. It was stored in <code>$HOME/.arango-mrb</code> before.</li>
</ul>
<h2><a class="anchor" id="Upgrading12RemovedFeatures"></a>
Removed Features </h2>
<h3><a class="anchor" id="Upgrading12RemovedFunctionality"></a>
Removed Functionality </h3>
<h4>arangosh</h4>
<p>The global <code>edges</code> variable has been removed in <code>arangosh</code>. In ArangoDB 1.1 and before this variable could be used to create and access edge collections.</p>
<p>Since ArangoDB 1.1, all collections can be accessed using the <code>db</code> variable, and there was no need to keep the <code>edges</code> variable any longer.</p>
<h4>arangoimp</h4>
<p>The parameter <code>--reuse-ids</code> for <em>arangoimp</em> was removed. This parameter was a workaround in ArangoDB 1.1 to re-import documents with a specific document id. This is not necessary in ArangoDB 1.2 as this version provides user-defined key values which can and should be used instead.</p>
<p>The separator parameter <code>--separator</code> for <em>arangoimp</em> was changed in 1.2 to allow exactly one separator character. In previous versions, separators longer than one character were supported.</p>
<p>The parameter <code>--eol</code> for <em>arangoimp</em> was also removed in 1.2. Line endings are now detected automatically by <em>arangoimp</em> as long as the standard line endings CRLF (Windows) or LF (Unix) are used.</p>
<h4>arango-password</h4>
<p>In ArangoDB 1.0 and 1.1 ArangoDB was shipped with a shell script named "arango-password" to create new users for ArangoDB. This has been removed in ArangoDB 1.2 in favor of managing users via <code>arangosh</code> or <code>arangod</code> directly.</p>
<p>Please refer to <a class="el" href="Upgrading12.html#Upgrading12Troubleshooting">Troubleshooting</a> for more information on how to manage users in ArangoDB 1.2. </p>
</div></div><!-- contents -->
</div>


	  </div><!-- .entry-content -->
	</div><!-- #post-## -->


      <div id="comments">


  <p class="nocomments">Comments are closed.</p>



</div><!-- #comments -->


      </div><!-- #content -->
    </div><!-- #container -->

  <div style="clear:both;"></div>
  </div><!-- #main -->



</div><!-- #wrapper -->
</div><!-- #surrounding -->


  <div id="footer" role="contentinfo">
    <div id="colophon">




      <div id="footer-widget-area" role="complementary">

	<div id="first" class="widget-area">
	  <ul class="xoxo">
		<li id="recent-posts-4" class="widget-container widget_recent_entries">	  <h3 class="widget-title">Recent Posts</h3>	<ul>
	  <li>
	<a href="http://www.arangodb.org/2013/05/22/replication-and-sharding-in-arangodb" title="Our plans on replication and sharding in ArangoDB">Our plans on replication and sharding in ArangoDB</a>
	    </li>
	  <li>
	<a href="http://www.arangodb.org/2013/05/14/ideas-and-facts-from-scotland-js-in-edinburgh" title="Ideas and Facts from scotland.js in Edinburgh">Ideas and Facts from scotland.js in Edinburgh</a>
	    </li>
	  <li>
	<a href="http://www.arangodb.org/2013/05/12/arangodb-1-3-0-released" title="ArangoDB 1.3.0 released">ArangoDB 1.3.0 released</a>
	    </li>
	  <li>
	<a href="http://www.arangodb.org/2013/05/06/foxx-screencast-part-2" title="Foxx Screencast: Part 2">Foxx Screencast: Part 2</a>
	    </li>
	</ul>
    </li><li id="text-5" class="widget-container widget_text"><h3 class="widget-title">Documentation</h3>     <div class="textwidget"><ul>
  <li><a href="/quickstart">First step tutorial</a></li>
  <li><a href="/manuals">Manual/documentation (HTML/PDF)</a></li>
  <li><a href="/manuals/arangodb_1.0_shell_reference_card.pdf">ArangoDB Shell Reference Card (HTML/PDF)</a></li>
  <li><a href="/try">Try ArangoDB online</a></li>
  <li><a href="/api">API clients & 3rd party libs</a></li>
        <li><a href="/logos">ArangoDB artwork/logos</a></li>
</ul>
</div>
    </li><li id="text-7" class="widget-container widget_text"><h3 class="widget-title">Social Links</h3>      <div class="textwidget"><ul>
  <li><a href="https://twitter.com/arangodb">ArangoDB on Twitter</a></li>
  <li><a href="https://groups.google.com/group/arangodb">ArangoDB Google Group</a></li>
  <li><a href="http://stackoverflow.com/questions/tagged/arangodb">ArangoDB questions on StackOverflow</a></li>
  <li><a href="https://github.com/triagens/arangodb/issues?state=open">Issue Tracker at Github</a></li>
</ul></div>
    </li><li id="text-6" class="widget-container widget_text"><h3 class="widget-title">Roadmap</h3>	<div class="textwidget"><ul>
  <li><a href="/roadmap/#v1.4">Backlog for Version 1.4</a></li>
  <li><a href="/roadmap/#v1.x">Backlog for Version 1.x</a></li>
</ul></div>
    </li>	  </ul>
	</div><!-- #first .widget-area -->




      </div><!-- #footer-widget-area -->


<!-- #site-generator -->

    </div><!-- #colophon -->

        <div class="copy">
            Copyright 2013 ArangoDB | <a href="/imprint">Imprint</a>
        </div>

  </div><!-- #footer -->

</body>
</html>